# é‡åŒ–äº¤æ˜“ä¸­OKXç™»å½•éªŒè¯é…ç½®å¸¸è§é—®é¢˜è§£æ

åœ¨è¿›è¡ŒOKXé‡åŒ–äº¤æ˜“APIå¼€å‘æ—¶ï¼Œå¼€å‘è€…å¸¸é‡åˆ°ä¸¤å¤§æ ¸å¿ƒéªŒè¯é—®é¢˜ï¼š**"timestamp request expired"**å’Œ**"invalid sign"**ã€‚æœ¬æ–‡å°†é€šè¿‡æŠ€æœ¯è§£æä¸ä»£ç ä¼˜åŒ–ï¼Œç³»ç»Ÿé˜è¿°è§£å†³æ–¹æ¡ˆå¹¶æä¾›ä¼˜åŒ–å»ºè®®ã€‚

---

## é—®é¢˜ä¸€ï¼štimestamp request expired

### æ ¸å¿ƒåŸå› åˆ†æ
è¯¥é”™è¯¯é€šå¸¸ç”±æ—¶é—´æˆ³æ ¼å¼ä¸åŒ¹é…å¼•å‘ï¼Œå…·ä½“è¡¨ç°ä¸ºï¼š
- æ—¶é—´ç²¾åº¦ä¸è¶³ï¼ˆéœ€ç²¾ç¡®åˆ°æ¯«ç§’ï¼‰
- æ—¶é—´æ ¼å¼æœªé‡‡ç”¨ISO 8601æ ‡å‡†
- æœåŠ¡å™¨ä¸æœ¬åœ°æ—¶é’Ÿå­˜åœ¨åå·®

### ä¼˜åŒ–è§£å†³æ–¹æ¡ˆ
é€šè¿‡é‡æ„æ—¶é—´æˆ³ç”Ÿæˆå‡½æ•°è§£å†³ï¼š
```python
def get_time():
    """ç”Ÿæˆç¬¦åˆOKX APIè¦æ±‚çš„æ—¶é—´æˆ³"""
    return dt.datetime.utcnow().isoformat()[:-3] + 'Z'
```
> âœ… å®æµ‹éªŒè¯ï¼šè¯¥å‡½æ•°å¯ç¡®ä¿ç”Ÿæˆæ ¼å¼å¦‚`2025-04-01T14:13:28.849Z`çš„ç²¾ç¡®æ—¶é—´æˆ³

---

## é—®é¢˜äºŒï¼šinvalid signç­¾åéªŒè¯å¤±è´¥

### ç­¾åé€»è¾‘è§£æ
OKXé‡‡ç”¨HMAC-SHA256åŠ å¯†ç®—æ³•ï¼Œå…³é”®éªŒè¯ç‚¹åœ¨äºï¼š
1. æ‹¼æ¥é¡ºåºï¼š`timestamp + HTTP_METHOD + è¯·æ±‚è·¯å¾„ + è¯·æ±‚ä½“`
2. å¯†é’¥é¡ºåºï¼šPythonçš„hmacåº“è¦æ±‚**å¯†é’¥åœ¨å‰ï¼Œæ¶ˆæ¯åœ¨å**

### åŠ å¯†å‡½æ•°ä¼˜åŒ–
```python
def signature(timestamp, method, request_path, body, secret_key):
    if str(body) == '{}' or str(body) == 'None':
        body = ''
    message = str(timestamp) + str.upper(method) + request_path + str(body)
    mac = hmac.new(
        bytes(secret_key, encoding='utf8'),  # å¯†é’¥å‰ç½®
        bytes(message, encoding='utf-8'),
        digestmod='sha256'
    )
    return base64.b64encode(mac.digest())
```
ğŸ‘‰ [è·å–é‡åŒ–äº¤æ˜“å·¥å…·åŒ…](https://bit.ly/okx_welcome)

---

## APIè¯·æ±‚å¤´æ„å»ºæŒ‡å—

å®Œæ•´è¯·æ±‚å¤´é…ç½®åº”åŒ…å«ï¼š
| å‚æ•°å              | å€¼ç¤ºä¾‹                          | å¿…å¡« |
|---------------------|---------------------------------|------|
| CONTENT-TYPE        | application/json                | æ˜¯   |
| OK-ACCESS-KEY       | API_KEY                         | æ˜¯   |
| OK-ACCESS-SIGN      | ç»è¿‡base64ç¼–ç çš„ç­¾å            | æ˜¯   |
| OK-ACCESS-TIMESTAMP | 2025-04-01T14:13:28.849Z        | æ˜¯   |
| OK-ACCESS-PASSPHRASE| ç”¨æˆ·è‡ªå®šä¹‰å¯†ç                   | æ˜¯   |

---

## å¼€å‘è€…å¸¸è§é—®é¢˜è§£ç­”

### Q1ï¼šä¸ºä»€ä¹ˆå¿…é¡»ä¸¥æ ¼åŒæ­¥æœåŠ¡å™¨æ—¶é—´ï¼Ÿ
Aï¼šOKX APIå…è®¸çš„æ—¶é—´åå·®çª—å£ä¸º5ç§’ï¼Œè¶…è¿‡è¯¥èŒƒå›´å°†è§¦å‘`timestamp request expired`é”™è¯¯ã€‚å»ºè®®ä½¿ç”¨NTPæœåŠ¡å®šæœŸæ ¡å‡†æœåŠ¡å™¨æ—¶é’Ÿã€‚

### Q2ï¼šç­¾åé¡ºåºé”™è¯¯ä¼šå¼•å‘ä»€ä¹ˆåæœï¼Ÿ
Aï¼šPythonçš„hmac.new()å‡½æ•°å¯¹å¯†é’¥å’Œæ¶ˆæ¯é¡ºåºæ•æ„Ÿï¼Œè‹¥è°ƒæ¢ä½ç½®ä¼šå¯¼è‡´ç”Ÿæˆé”™è¯¯ç­¾åï¼Œç³»ç»Ÿå°†è¿”å›`invalid sign`éªŒè¯å¤±è´¥ã€‚

### Q3ï¼šå¦‚ä½•å¿«é€Ÿæµ‹è¯•APIé…ç½®æœ‰æ•ˆæ€§ï¼Ÿ
Aï¼šæ¨èä½¿ç”¨ä»¥ä¸‹è°ƒè¯•æ–¹æ¡ˆï¼š
1. å…ˆè°ƒç”¨`/api/v5/public/instruments`å…¬å…±æ¥å£éªŒè¯åŸºç¡€é…ç½®
2. ä½¿ç”¨æµ‹è¯•å¯†é’¥è¿›è¡Œæ²™ç›’ç¯å¢ƒéªŒè¯
3. é€šè¿‡æ—¥å¿—è®°å½•å®Œæ•´è¯·æ±‚å¤´å’Œå“åº”ç è¾…åŠ©æ’æŸ¥

ğŸ‘‰ [æŸ¥çœ‹OKXå®˜æ–¹APIæ–‡æ¡£](https://bit.ly/okx_welcome)

---

## è¿›é˜¶ä¼˜åŒ–å»ºè®®

1. **å¼‚å¸¸å¤„ç†æœºåˆ¶**
```python
try:
    response = requests.get(url, headers=header, timeout=10)
    response.raise_for_status()
except requests.exceptions.Timeout:
    print("è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥")
except requests.exceptions.HTTPError as err:
    print(f"HTTPé”™è¯¯: {err.response.status_code}")
```

2. **æ—¥å¿—è®°å½•è§„èŒƒ**
å»ºè®®è®°å½•ä»¥ä¸‹å…³é”®æ•°æ®ï¼š
- å®Œæ•´è¯·æ±‚URL
- è¯·æ±‚å¤´ä¿¡æ¯
- å“åº”çŠ¶æ€ç 
- é”™è¯¯å“åº”å†…å®¹

ğŸ‘‰ [è·å–ä¸“ä¸šé‡åŒ–äº¤æ˜“APIæ–‡æ¡£](https://bit.ly/okx_welcome)

---
